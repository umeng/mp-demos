"use strict";var e,t,n="[UMENG] -- ",p=(t=!1,function(){null===e&&(e=new i);return e});function i(){this.setDebug=function(e){t=e};this.d=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.debug.apply(console,arguments)}catch(e){}};this.i=function(){try{if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.info.apply(console,arguments)}catch(e){}}catch(e){}};this.e=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(e){}};this.w=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(e){}};this.v=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.log.apply(console,arguments)}catch(e){}};this.t=function(){if(t)try{console.table.apply(console,arguments)}catch(e){}};this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.log.apply(console,arguments)}catch(e){}};this.tip_w=function(e){try{console.log("%c "+n+e,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(e){}};this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(e){}};this.repeat=function(e){for(var t=e;t.length<86;)t+=e;return t}}var r,f=(r=e=null,function(){return r=r||new o});function o(){var n={};this.useOpenid=function(){return!!n.useOpenid};this.useSwanid=function(){return!!n.useSwanid};this.autoGetOpenid=function(){return!!n.autoGetOpenid};this.appKey=function(){return n.appKey};this.uploadUserInfo=function(){return n.uploadUserInfo};this.enableVerify=function(){return n.enableVerify};this.set=function(e){n=e};this.get=function(){return n};this.setItem=function(e,t){n[e]=t};this.getItem=function(e){return n[e]}}function s(){}s.prototype={on:function(e,t,n){var i=this.e||(this.e={});(i[e]||(i[e]=[])).push({fn:t,ctx:n});return this},once:function(e,t,n){var i=this;function r(){i.off(e,r);t.apply(n,arguments)}r._=t;return this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,s=i.length;o<s;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);r.length?n[e]=r:delete n[e];return this}};var a=new s;a.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};var u=ks,h=new(function(){function e(){}e.prototype.setStorage=function(e,t,n){u.setStorage({key:e,data:t,success:function(){"function"==typeof n&&n(!0)},fail:function(){"function"==typeof n&&n(!1)}})};e.prototype.getStorage=function(t,n){u.getStorage({key:t,success:function(e){"function"==typeof n&&n(e.data)},fail:function(e){p().w(t+": "+e.errMsg);"function"==typeof n&&n()}})};e.prototype.removeStorage=function(e,t){u.removeStorage({key:e,success:function(){"function"==typeof t&&t(!0)},fail:function(){"function"==typeof t&&t(!1)}})};e.prototype.getSystemInfo=function(s){u.getSystemInfo({success:function(e){e.safeArea=e.safeArea||{};var t="";e.host&&"string"==typeof e.host.env&&(t=e.host.env);var n={model:e.model,brand:e.brand,pixelRatio:e.pixelRatio,screenWidth:e.screenWidth,screenHeight:e.screenHeight,fontSizeSetting:e.fontSizeSetting,platform:e.platform,platformVersion:e.version,platformSDKVersion:e.SDKVersion,language:e.language,deviceName:e.model,OSVersion:e.system,resolution:"",theme:e.theme,benchmarkLevel:e.benchmarkLevel,safeArea:{width:e.safeArea.width,height:e.safeArea.height,top:e.safeArea.top,left:e.safeArea.left,bottom:e.safeArea.bottom,right:e.safeArea.right},statusBarHeight:e.statusBarHeight,host:t},i=e.system.split(" ");Array.isArray(i)&&(n.OS=i[0]);var r=Math.round(e.screenWidth*e.pixelRatio),o=Math.round(e.screenHeight*e.pixelRatio);n.resolution=o<r?r+"*"+o:o+"*"+r;"function"==typeof s&&s(n)},fail:function(){"function"==typeof s&&s()}})};e.prototype.getDeviceInfo=function(e){"function"==typeof e&&e("")};e.prototype.checkNetworkAvailable=function(t){u.getNetworkType({success:function(e){"function"==typeof t&&t(e&&"none"!==e.networkType)},fail:function(){"function"==typeof t&&t(!1)}})};e.prototype.getNetworkInfo=function(t){u.getNetworkType({success:function(e){"function"==typeof t&&t({networkAvailable:"none"!==e.networkType,networkType:e.networkType})},fail:function(){"function"==typeof t&&t()}})};e.prototype.getDeviceId=function(e){e("")};e.prototype.getAdvertisingId=function(e){"function"==typeof e&&e("")};e.prototype.onNetworkStatusChange=function(t){u.onNetworkStatusChange(function(e){"function"==typeof t&&t(e.isConnected)})};e.prototype.request=function(e){var t=e.success,n=e.fail,i=!1,r=null;e.success=function(e){if(!i){r&&clearTimeout(r);"function"==typeof t&&t(e)}};e.fail=function(){if(!i){r&&clearTimeout(r);"function"==typeof n&&n(!1)}};u.request(e);r=setTimeout(function(){r&&clearTimeout(r);i=!0;"function"==typeof n&&n(i)},e.timeout||5e3)};e.prototype.getSdkType=function(){return"ksmp"};e.prototype.getPlatform=function(){return"ks"};e.prototype.getUserInfo=function(n){var t={fail:function(){n&&n()},success:function(e){if(e&&e.userInfo){var t=e.userInfo;n&&n({avatar:t.avatarUrl,nickName:t.nickName,gender:t.gender,country:t.country,province:t.province,city:t.city,language:t.language})}}};try{u.getSetting({success:function(e){e.authSetting["scope.userInfo"]&&u.getUserInfo(t)},fail:function(){n()}})}catch(e){p.e("getUserInfo error",e)}};e.prototype.getAppInfoSync=function(){if(u.getAccountInfoSync){var e=u.getAccountInfoSync(),t=e&&e.miniProgram?e.miniProgram:{};return{appId:t.appId,appEnv:t.envVersion,appVersion:t.version}}return{}};e.prototype.onShareAppMessage=function(e){u.onShareAppMessage(e)};e.prototype.shareAppMessage=function(e){u.shareAppMessage(e)};return e}()),c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function d(e,t){c(e,t);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l={SESSION_INTERVAL:3e4,LOG_URL:"https://umini.shujupie.com/wxm_logs",GET_OPENID_URL:"https://umini.shujupie.com/uminiprogram_logs/wx/getuut",USERINFO_URL:"https://umini.shujupie.com/uminiprogram_logs/comm/uif",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.4.4",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1,ALIYUN_URL:"serverless.huoban.youmeng.network.forward"};var g,v,_={isNumber:function(e){return!Number.isNaN(parseInt(e,10))},compareVersion:function(e,t){for(var n=String(e).split("."),i=String(t).split("."),r=0;r<Math.max(n.length,i.length);r++){var o=parseInt(n[r]||0,10),s=parseInt(i[r]||0,10);if(s<o)return 1;if(o<s)return-1}return 0},getRandomStr:function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=0;i<Number(e);i++){t+=n[Math.round(Math.random()*(n.length-1))]}return t},clone:function(e){return JSON.parse(JSON.stringify(e))},startsWith:function(e,t){return!(!e||!t||0===t.length||t.length>e.length)&&e.substr(0,t.length)===t},endsWith:function(e,t){return!(!t||0===e.length||t.length>e.length)&&e.substring(e.length-t.length)===t},assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},deepEqual:function e(t,n){if(t===n)return!0;if(t&&"object"==typeof t&&n&&"object"==typeof n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t){if(Object.prototype.hasOwnProperty.call(n,i))return!1;if(!e(t[i],n[i]))return!1}return!0}return!1},trimStart:function(e,t){if(!e)return"";if("string"==typeof t&&t.length){var n=new RegExp("^"+t+"*");e=e.replace(n,"")}else e=e.replace(/^s*/,"");return e},trimEnd:function(e,t){if(!e)return"";var n,i;if("string"==typeof t&&t.length){n=new RegExp(t);i=e.length;for(;n.test(e.charAt(i));)--i;return e.slice(0,i+1)}n=/s/;i=e.length-1;for(;n.test(e.charAt(i));)--i;return e.slice(0,i+1)},isFunction:function(e){return"function"==typeof e}},y=function(t){d(e,t);function e(){var e=null!==t&&t.apply(this,arguments)||this;e._openid="";e._unionid="";e._useOpenid=!1;return e}e.prototype.initID=function(t){var n=this;n._idType=n._useOpenid?"openid":"uuid";p().v("id type: ",n._idType);h.getStorage(l.UNIONID,function(e){n._unionid=e});this._useOpenid?h.getStorage(l.OPENID,function(e){n._openid=e;t&&t()}):t&&t()};e.prototype.setUseOpenid=function(e){this._useOpenid=e};e.prototype.setOpenid=function(e){if(!this._openid&&e){this._openid=e;h.setStorage(l.OPENID,e)}};e.prototype.setUnionid=function(e){if(!this._unionid&&e){this._unionid=e;h.setStorage(l.UNIONID,e)}};e.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);this._openid&&(e.openid=this._openid);this._unionid&&(e.unionid=this._unionid);this._userid&&(e.userid=this._userid);return e};e.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid};return e}(function(){function e(){this._uuid="";this._userid="";this._provider="";this._idType=""}e.prototype.createUUID=function(){return _.getRandomStr(10)+Date.now()+_.getRandomStr(7)+l.UUID_SUFFIX};e.prototype.initUUID=function(t){var n=this;h.getStorage(l.UUID,function(e){if(e)n._uuid=e;else{n._uuid=n.createUUID();h.setStorage(l.UUID,n._uuid)}t&&t(e)})};e.prototype.initUserid=function(){var t=this;h.getStorage(l.USERID,function(e){if(!t._userid&&e){t._userid=e;p().v("userId is ",e)}});h.getStorage(l.PROVIDER,function(e){if(!t._provider&&e){t._provider=e;p().v("provider is ",e)}})};e.prototype.init=function(e){var t=this;t.initUUID(function(){t.initUserid();t.initID(e)})};e.prototype.setUserid=function(e,t){if(!this._userid&&e){this._userid=e;this._provider=t;h.setStorage(l.USERID,e);h.setStorage(l.PROVIDER,t)}};e.prototype.getUserId=function(){return this._userid};e.prototype.getProvider=function(){return this._provider};e.prototype.getIdType=function(){return this._idType};e.prototype.getIdTracking=function(){var e={};this._uuid&&(e.uuid=this._uuid);this._userid&&(e.userid=this._userid);return e};return e}()),m=ks,S=function(e){d(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.getOpenIdAsync=function(t,n){var i=this;m.login({success:function(e){e.code?h.request({url:l.GET_OPENID_URL,method:"GET",data:{key:t,code:e.code},success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.data){var t=e.data.data;i.setOpenid(t.oid);i.setUnionid(t.uid);return n&&n(!0)}n&&n()},fail:function(e){p().v("wx request failed...",e);n&&n()}}):n&&n()},fail:function(){n&&n()}})};return t}(y),I=function(){return g=g||new S},E=function(){return v=v||new O};function O(){var n=!1,i=null,r=[];this.addPageStart=function(e){if(e&&!n){i={ts:Date.now(),path:e,page_name:e};n=!0}};this.addPageEnd=function(e){if(n&&e&&i&&e===i.page_name){var t=Date.now()-i.ts;i.duration=Math.abs(t);r.push(i);i=null;n=!1}};this.get=function(){return r};this.getCurrentPage=function(){return i};this.clear=function(){r.length=0}}var A={};function N(){return function(e){var t=[];for(var n in e)"_um_ssrc"!==n&&"_um_sts"!==n&&t.push(n+"="+e[n]);return t.join("&")}(A)}var T,k,R,w=function(){return T=T||new b};function b(){return{add:function(e,t){p().v("share origin: %o",e);var n={title:e&&e.title,path:e&&e.path&&e.path.split("?")[0],_um_sts:Date.now()};n.path&&1<n.path.length&&_.startsWith(n.path,"/")&&(n.path=_.trimStart(n.path,"/"));var i=e.path||"",r=I().getId();if(r){var o=R.split(","),s=(o=o.filter(function(e){return 0<e.length})).indexOf(r);0<=s&&(o=o.slice(0,s));o.length<3&&o.push(r);var a=o.join(",");-1!==i.indexOf("?")?i+="&_um_ssrc="+a:i+="?_um_ssrc="+a;var u=Date.now();i+="&_um_sts="+u;if(t){var c=N(),f=c?c+"&_um_ssrc="+a+"&_um_sts="+u:"_um_ssrc="+a+"&_um_sts="+u;e.query=e.query?e.query+"&_um_ssrc="+a+"&_um_sts="+u:f}else e.path=i;n._um_ssrc=a;n._um_sts=u}k.push(n);p().v("share: %o",e);return e},setShareSource:function(e){R=e},clear:function(){k.length=0},get:function(){return k}}}var U,D,L,P,C={stringify:function(e){if(e)try{return JSON.stringify(e)}catch(e){}return""},parse:function(e){if(e)try{return JSON.parse(e)}catch(e){}return null},parseToArray:function(e){if(e)try{return JSON.parse(e)}catch(e){}return[]}},M=(P=!(k=[]),function(){return U=U||new V});function V(){this.load=function(t){if(L){h.removeStorage(D);t()}else{D="um_cache_"+f().appKey();h.getStorage(D,function(e){L=C.parse(e)||{};P=!0;h.removeStorage(D);t()})}};this.save=function(){L&&h.setStorage(D,C.stringify(L))};this.set=function(e,t){L&&(L[e]=t)};this.get=function(e){return(L||{})[e]};this.remove=function(e){L&&L[e]&&delete L[e]};this.getAll=function(){return L};this.clear=function(){L=null};this.has=function(e){return!!this.get(e)};this.isLoaded=function(){return P}}var j,G,F,K,x="ekvs",H=1e4,q=(F=[],K=[],function(){return j=j||{addEvent:function(e){if(G){F.unshift(e);if(1<F.length){Y();F.length=0}}else{p().w("session id is null: ",G);K.unshift(e)}},setSessionId:function(e){G=e;p().v("setSessionId: ",G);if(Array.isArray(K)&&K.length&&G){for(var t=0;t<K.length;t++)this.addEvent(K[t]);K.length=0}},getEkvs:function(){var e=M().get(x);F&&F.length&&(e=B(e,F));return e},clear:function(){M().remove(x);F.length=0}}});function Y(){if(F.length){var e=M().get(x);if(function(e){var t=0;for(var n in e)Array.isArray(e[n])&&(t+=e[n].length);return t}(e)+F.length<=H){e=B(e,F);M().set(x,e)}}}function B(e,t){var n=(e=e||{})[G];Array.isArray(n)&&n.length?e[G]=n.concat(t):e[G]=[].concat(t);return e}var W,J="2g",X="3g",z="4g",Q={HALF_SESSION:"half_session",CLOSE_SESSION:"close_session",EKV:"ekv",ENTER_PAGE:"enter_page",LEAVE_PAGE:"leave_page"},Z=["access","access_subtype"],$={instance:function(){return W=W||ee()}};function ee(){var e=!1,r={};function t(i){var e=M().get(l.IMPRINT);e&&(r.imprint=e);r.device_type="Phone";r.sdk_version=l.IMPL_VERSION;r.appkey=f().appKey();h.getDeviceInfo(function(e){r.device_info=e||""});var t=h.getAppInfoSync();r.appid=t.appId;r.app_env=t.appEnv;r.app_version=t.appVersion;h.getSystemInfo(function(n){h.getNetworkInfo(function(e){var t=function(e,t){var n={};(e=e||{}).safeArea=e.safeArea||{};var i=(t=t||{}).networkType;"none"===i&&(i="unknown");var r=e.model||"",o=e.platform||"",s=e.brand||"",a=s.toLowerCase();n.sdk_type=h.getSdkType();n.platform=h.getPlatform();n.platform_sdk_version=e.platformSDKVersion;n.platform_version=e.platformVersion;n.resolution=e.resolution;n.pixel_ratio=e.pixelRatio;n.os=o;n.font_size_setting=e.fontSizeSetting;n.device_model=r;n.device_brand=s;n.device_manufacturer=a;n.device_manuid=r;n.device_name=r;n.os_version=e.OSVersion;n.language=e.language;n.theme=e.theme;n.benchmark_level=e.benchmarkLevel;n.status_bar_height=e.statusBarHeight;n.safe_area_top=e.safeArea.top;n.safe_area_left=e.safeArea.left;n.safe_area_right=e.safeArea.right;n.safe_area_bottom=e.safeArea.bottom;n.safe_area_height=e.safeArea.height;n.safe_area_width=e.safeArea.width;n.storage=e.storage;n.screen_width=e.screenWidth;n.screen_height=e.screenHeight;n.host=e.host;switch(i=i?i.toLowerCase():""){case z:n.access_subtype="LTE";n.access="4G";break;case X:n.access_subtype="CDMA";n.access="3G";break;case J:n.access_subtype="GRPS";n.access="2G";break;default:n.access=i;delete n.access_subtype}return n}(n,e);_.assign(r,t);i&&i()})})}return{init:function(){t(function(){e=!0})},isLoaded:function(){return e},get:function(){return r},getRealtimeFields:function(){var t={};Z.forEach(function(e){t[e]=r[e]});return t},setIdTracking:function(e){this.setItem("id_tracking",e)},setIdType:function(e){this.setItem("id_type",e)},setAppVersion:function(e){this.setItem("app_version",e)},setSuperProperty:function(e){r.sp||(r.sp={});r.sp.isv=e},getSuperProperty:function(){return r&&r.sp?r.sp.isv:""},setItem:function(e,t){r[e]=t},getItem:function(e){return r[e]}}}var te,ne,ie,re=(ie=ne=te=W=L=U=T=v=g=null,function(){return te=te||oe()});function oe(){return{resume:function(e){var t=!1;ie=ie||M().get(l.CURRENT_SESSION);var n=new Date;ne=n.getTime();if(!ie||!ie.end_time||ne-ie.end_time>l.SESSION_INTERVAL){t=!0;!function(e){try{var t=(ie||{}).options||{},n=_.assign({},function(e){var t={};for(var n in e)0===n.indexOf("_um_")&&(t[n]=e[n]);p().v("query: ",e);p().v("_um_params: ",t);return t}(e.query));n.path=e.path||t.path;n.scene=e.scene?h.getPlatform()+"_"+e.scene:t.scene;var i=e.referrerInfo;i&&(n.referrerAppId=i.appId);p().v("session options: ",n);var r=n[l.UM_SSRC];r&&w().setShareSource(r);var o=Date.now();ie={id:_.getRandomStr(10)+o,start_time:o,options:n}}catch(e){p().e("生成新session失败: ",e)}}(e);p().v("开始新的session(%s): ",ie.id,ie)}else p().v("延续上一次session(%s): %s ",ie.id,n.toLocaleTimeString(),ie);return t},pause:function(){!function(){if(ie){var e=new Date;ie.end_time=e.getTime();"number"!=typeof ie.duration&&(ie.duration=0);ie.duration=ie.end_time-ne;M().set(l.CURRENT_SESSION,ie);p().v("退出会话(%s): %s ",ie.id,e.toLocaleTimeString(),ie)}}()},getCurrentSessionId:function(){return(ie||{}).id},getCurrentSession:function(){return ie},cloneCurrentSession:function(){return _.clone(ie)}}}function se(e){var t=null;switch(e){case Q.HALF_SESSION:t=function(){var e=null,t=re().cloneCurrentSession();t&&(e={header:{st:"1"},analytics:{sessions:[t]}});return e}();break;case Q.CLOSE_SESSION:t=function(){var e=null,t={},n=re().cloneCurrentSession();if(n){var i=E().get(),r=w().get();Array.isArray(i)&&i.length&&(n.pages=_.clone(i));Array.isArray(r)&&r.length&&(n.shares=_.clone(r));E().clear();w().clear();t.sessions=[n]}var o=q().getEkvs();if(o){t.ekvs=_.clone(o);q().clear()}(t.sessions||t.ekvs)&&(e={analytics:t});return e}();break;case Q.EKV:t=function(){var e=null,t=q().getEkvs();if(t){e={analytics:{ekvs:_.clone(t)}};q().clear()}return e}()}return t}var ae={sessions:"sn",ekvs:"e",active_user:"active_user"},ue={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},ce={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"};function fe(e){return{h:function(e,t){var n=pe(e,t);e&&e.id_tracking&&(n[t.id_tracking||"id_tracking"]=pe(e.id_tracking,ce));return n}(e.header,ue),a:function(e,t){var n={};if(e)for(var i in e)e[i]&&(n[t[i]]=e[i]);return n}(e.analytics,ae)}}function pe(e,t){var n={};for(var i in e)t[i]?n[t[i]]=e[i]:n[i]=e[i];return n}var he=D=R="";function de(e){if(e.length<2){return(t=e.charCodeAt(0))<128?e:t<2048?Ie(192|t>>>6)+Ie(128|63&t):Ie(224|t>>>12&15)+Ie(128|t>>>6&63)+Ie(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return Ie(240|t>>>18&7)+Ie(128|t>>>12&63)+Ie(128|t>>>6&63)+Ie(128|63&t)}function le(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[me.charAt(n>>>18),me.charAt(n>>>12&63),2<=t?"=":me.charAt(n>>>6&63),1<=t?"=":me.charAt(63&n)].join("")}function ge(e){return e.replace(Ee,de).replace(/[\s\S]{1,3}/g,le)}function ve(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return Ie(55296+(t>>>10))+Ie(56320+(1023&t));case 3:return Ie((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ie((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}}function _e(e){var t=e.length,n=t%4,i=(0<t?Se[e.charAt(0)]<<18:0)|(1<t?Se[e.charAt(1)]<<12:0)|(2<t?Se[e.charAt(2)]<<6:0)|(3<t?Se[e.charAt(3)]:0),r=[Ie(i>>>16),Ie(i>>>8&255),Ie(255&i)];r.length-=[0,0,2,1][n];return r.join("")}function ye(e){return e.replace(/[\s\S]{1,4}/g,_e).replace(Oe,ve)}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Se=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(me),Ie=String.fromCharCode,Ee=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Oe=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),Ae={encode:function(e,t){return t?ge(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):ge(String(e))},decode:function(e){return ye(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}};var Ne=new function(){var t="",n=this;this.set=function(e){t=e};this.get=function(){return t};this.getImpObj=function(){return C.parse(Ae.decode(t))};this.getItem=function(e){var t=n.getImpObj();return t&&t[e]||""};this.load=function(){t=M().get(l.IMPRINT)};this.save=function(){t&&M().set(l.IMPRINT,t)}};function Te(n,i,r,e){$.instance().setIdType(I().getIdType());$.instance().setIdTracking(I().getIdTracking());var t=I().getUserId();t&&n.analytics&&(n.analytics.active_user={puid:t,provider:I().getProvider()});var o=_.clone($.instance().get());n.header=_.assign(o,n.header,{ts:Date.now(),testToken:he,traceId:_.getRandomStr(10)+Date.now()+_.getRandomStr(9)});var s,a=fe(n),u=C.stringify(a),c={url:l.LOG_URL,method:"POST",data:Ae.encode(u),success:function(e){var t=e.code||e.status||e.statusCode;if(200===t||413===t){p().i("数据发送成功: ",n,u);!function(e){if(e){$.instance().setItem(l.IMPRINT,e);Ne.set(e);Ne.save();p().v("imprint: ",Ne.getImpObj());Ne.getItem("ttn_invalid")&&(he="")}}((e.data||{}).imprint);"function"==typeof i&&i(e)}else{p().w("数据发送失败: ",u);"function"==typeof r&&r()}},fail:function(e){p().w("超时: ",u);"function"==typeof r&&r()},complete:function(){"function"==typeof e&&e()}};h.request(_.assign(c,{header:{"Content-Type":s=h.getSdkType()+"/json","Msg-Type":s}}))}function ke(e){var t=e,n=[];this.enqueue=function(e){"number"==typeof t&&this.size()>=t&&this.dequeue();n.push(e)};this.dequeue=function(){return n.shift()};this.front=function(){return n[0]};this.isEmpty=function(){return 0===n.length};this.clear=function(){n.length=0};this.size=function(){return n.length};this.items=function(){return n};this.print=function(){console.log(n.toString())}}var Re,we,be,Ue,De=(Re=null,we=!1,be=[],Ue=new ke(50),function(){return Re=Re||new Ce});function Le(t){var e=Ue.front();if(e)Te(e,function(){Ue.dequeue();Le(t)},function(){var e=Ue.dequeue();e&&!e.noCache&&be.push(e);Le(t)});else{!function(){be.forEach(function(e){Ue.enqueue(e)});be.length=0}();t()}}function Pe(e){if(I().getId())if(we)p().i("队列正在发送中");else{we=!0;Le(function(){we=!1;"function"==typeof e&&e()})}else{p().i("获取id标识失败，暂缓发送");"function"==typeof e&&e()}}function Ce(){this.send=function(e,t,n){e?this.add(e,t,function(){Pe(n)}):Pe(n)};this.add=function(e,t,n){!function e(t,n,i){if($.instance().isLoaded()){n=n||{};var r=se(t);if(r){var o=$.instance().getRealtimeFields();r.header=_.assign({},r.header,o);r.noCache=n.noCache;Ue.enqueue(r)}"function"==typeof i&&i()}else setTimeout(function(){e(t,n,i)},100)}(e,t,n)};this.load=function(){var e=M().get(l.REQUESTS);e&&e.length&&e.forEach(function(e){Ue.enqueue(e)});M().remove(l.REQUESTS)};this.save=function(){M().set(l.REQUESTS,_.clone(Ue.items()));Ue.clear()}}var Me,Ve=(Me=null,function(){return Me=Me||new je});function je(){this.update=function(){h.getUserInfo(function(t){if(t){var e=M().get(l.USER_INFO);e&&_.deepEqual(t,e)||function(t,n){var e=f().appKey(),i=h.getSdkType(),r=I().getId(),o=I().getIdType();if(!(e&&i&&r&&o))return;var s={ak:f().appKey(),sdt:h.getSdkType(),uin:t.nickName,uia:t.avatar,uig:t.gender,uit:t.country,uip:t.province,uic:t.city,uil:t.language,id:I().getId(),it:I().getIdType()},a=JSON.stringify(s);a=Ae.encode(a);h.request({url:l.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+a,success:function(e){p().v("用户信息上传成功: ",t);n&&n(e&&e.data&&200===e.data.code)},fail:function(){p().e("用户信息上传失败: ",t);n&&n(!1)}})}(t,function(e){e&&M().set(l.USER_INFO,t)})}})}}function Ge(e,t){this.id=e;this.ts=Date.now();var n=typeof t;if("string"==n&&t)this[e]=t;else if("object"==n)for(var i in t)!{}.hasOwnProperty.call(t,i)||(this[i]=t[i])}function Fe(){var u=!1,n=!1,c=0;this.init=function(e){p().v("sdk version: "+l.IMPL_VERSION);u?p().v("Lib重复实例化"):M().load(function(){p().v("cache初始化成功: ",M().getAll());!function(){I().setUseOpenid&&I().setUseOpenid(f().useOpenid());I().init(function(){$.instance().init();p().v("Header初始化成功")})}();u=!0;"function"==typeof e&&e();p().tip("SDK集成成功")})};this.resume=function(e){if(u&&!n){p().v("showOptions: ",e);var t;n=!0;f().enableVerify()&&e&&e.query&&(t=e.query._ttn,he=t||he);this._resume(e)}};this._resume=function(e){De().load();var t=re().resume(e),n=re().getCurrentSessionId();q().setSessionId(n);t&&De().add(Q.HALF_SESSION,{},function(){I().setUseOpenid&&I().setUseOpenid(f().useOpenid());if(f().useOpenid()&&f().autoGetOpenid()&&!I().getId()){p().v("get id async");!function t(n,i){if(I().getId()||n<=0)return;I().getOpenIdAsync(f().appKey(),function(e){if(e){p().v("获取id成功");De().send()}else{p().v("获取openid失败,启动重试,剩余可用次数",n-1);setTimeout(function(){t(n-1,i)},i)}})}(10,3e3)}else{p().v("session auto send");De().send()}})};this.pause=function(e){if(u){n=!1;c=0;re().pause();f().uploadUserInfo()&&Ve().update();De().send(Q.CLOSE_SESSION,{},function(){De().save();M().save();p().v("cache save success");"function"==typeof e&&e()})}};this.setOpenid=function(e){p().v("setOpenId: %s",e);I().setOpenid(e);De().send()};this.setUnionid=function(e){p().v("setUnionid: %s",e);I().setUnionid(e)};this.setUserid=function(e,t){p().v("setUserid: %s",e,t);I().setUserid(e,t)};this.setAnonymousid=function(e){p().v("setAnonymousId: %s",e);I().setAnonymousid(e);De().send()};this.setAppVersion=function(e){e&&"string"!=typeof e?p().w("setAppVersion方法只接受字符串类型参数"):$.instance().setAppVersion(e)};this.setAlipayUserid=function(e){if(e&&"string"!=typeof e)p().w("setAlipayUserid方法只接受字符串类型参数");else{p().v("setAlipayUserid: %s",e);I().setAlipayUserid(e)}};this.setDeviceId=function(e){if("string"==typeof e){I().setDeviceId(e);return e}};this.setSuperProperty=function(e){if(e&&"string"!=typeof e)p().w("超级属性只支持字符串类型");else{var t=this;if($.instance().getSuperProperty()!==e){$.instance().setSuperProperty(e);t.pause(function(){t.resume()})}}};this.trackEvent=function(e,t){if(u){p().v("event: ",e,t);if(function(e,t){if(e&&"string"==typeof e){var n=["id","ts","du"],i={};n.forEach(function(e){i[e]=1});if(i[e])p().e("eventId不能与以下保留字冲突: "+n.join(","));else if(e.length>l.MAX_EVENTID_LENGTH)p().e("The maximum length of event id shall not exceed "+l.MAX_EVENTID_LENGTH);else{if(!t||"object"==typeof t&&!Array.isArray(t)||"string"==typeof t){if("object"==typeof t){var r=0;for(var o in t)if({}.hasOwnProperty.call(t,o)){if(o.length>l.MAX_PROPERTY_KEY_LENGTH){p().e("The maximum length of property key shall not exceed "+l.MAX_PROPERTY_KEY_LENGTH);return}if(r>=l.MAX_PROPERTY_KEYS_COUNT){p().e("The maximum count of properties shall not exceed "+l.MAX_PROPERTY_KEYS_COUNT);return}if(i[o]){p().e("属性中的key不能与以下保留字冲突: "+n.join(","));return}r+=1}}return 1}p().e("please check trackEvent properties. properties should be string or object(not include Array)")}}else p().e('please check trackEvent id. id should be "string" and not null')}(e,t)){var n=new Ge(e,t);q().addEvent(n);var i=!!he,r=i?0:l.EVENT_SEND_DEFAULT_INTERVAL,o=Date.now();if(s=o,a=r,"number"!=typeof c||"number"!=typeof a||c<=0||a<s-c){c=o;De().send(Q.EKV,{noCache:i},function(){})}}var s,a}};this.trackShare=function(e){if(u){try{if(-1<h.getSdkType().indexOf("game")){e=w().add(e,!0);p().v("shareQuery: ",e)}else{e=w().add(e,!1);p().v("sharePath: ",e.path)}}catch(e){p().v("shareAppMessage: ",e)}return e}};this.trackPageStart=function(e){u&&E().addPageStart(e)};this.trackPageEnd=function(e){u&&E().addPageEnd(e)};this.onShareAppMessage=function(e){var t=this;h.onShareAppMessage(function(){return t.trackShare(e())})};this.shareAppMessage=function(e){this.trackShare(e);h.shareAppMessage(e)}}var Ke=[];function xe(){}xe.prototype={createMethod:function(e,t,n){try{e[t]=n&&n[t]?function(){return n[t].apply(n,arguments)}:function(){Ke.push([t,[].slice.call(arguments)])}}catch(e){p().v("create method errror: ",e)}},installApi:function(e,t){try{for(var n="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setUnionid".split(","),i=0,r=n.length;i<r;i++)this.createMethod(e,n[i],t);if(t)for(i=0,r=Ke.length;i<r;i++){var o=Ke[i];try{t[o[0]].apply(t,o[1])}catch(e){p().v("impl[v[0]].apply error: ",o[0],e)}}}catch(e){p().v("install api errror: ",e)}}};var He=["https://umini.shujupie.com","https://ulogs.umeng.com"],qe=0;function Ye(t,e){if(t>=He.length||e){e&&function(){var e="https://umini.shujupie.com";l.LOG_URL=l.LOG_URL.replace(e,He[qe]);l.GET_OPENID_URL=l.GET_OPENID_URL.replace(e,He[qe]);l.USERINFO_URL=l.USERINFO_URL.replace(e,He[qe])}();e&&p().v("命中可用服务",He[qe]);e||p().tip_w("未命中可用服务")}else h.request({url:He[t]+"/uminiprogram_logs/ckdh",success:function(e){200===(e.code||e.status||e.statusCode)&&e.data&&200===e.data.code?Ye((qe=t)+1,!0):Ye(t+1,!1)},fail:function(){Ye(t+1,!1)}})}({init:function(e){setTimeout(function(){Ye(0,!1)},e)}}).init(3e3);var Be=new xe,We={_inited:!1,_log:p(),use:function(e,t){e&&_.isFunction(e.install)?e.install(We,t):_.isFunction(e)&&e(We,t);return We},messager:a,init:function(e){if(this._inited)p().v("已经实例过，请避免重复初始化");else if(e)if(e.appKey){"boolean"!=typeof e.useOpenid&&(e.useOpenid=!0);f().set(e);p().setDebug(e.debug);this._inited=!0;var t=this;a.emit(a.messageType.CONFIG_LOADED,e);try{var n=new Fe;p().v("成功创建Lib对象");n.init(function(){p().v("Lib对象初始化成功");Be.installApi(t,n);p().v("安装Lib接口成功");a.emit(a.messageType.UMA_LIB_INITED,e)})}catch(e){p().w("创建Lib对象异常: "+e)}}else p().err("请确保传入正确的appkey");else p().err("请正确设置相关信息！")}};try{Be.installApi(We,null)}catch(e){p().w("uma赋值异常: ",e)}var Je={FETCH_URL:"https://ucc.umeng.com/v1/mini/fetch",ABLOG_URL:"https://pslog.umeng.com/mini_ablog",SDK_VERSION:"2.4.4",MOBILE_NETWORK_NONE:"none",MOBILE_NETWORK_2G:"2g",MOBILE_NETWORK_3G:"3g",MOBILE_NETWORK_4G:"4g",MOBILE_NETWORK_5G:"5g",MOBILE_NETWORK_WIFI:"wifi",IMPRINT:"imprint"},Xe={},ze=Array.isArray;Xe.isArray=ze||function(e){return"[object Array]"===toString.call(e)};Xe.isObject=function(e){return e===Object(e)&&!Xe.isArray(e)};Xe.isEmptyObject=function(e){if(Xe.isObject(e)){for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}return!1};Xe.isUndefined=function(e){return void 0===e};Xe.isString=function(e){return"[object String]"===toString.call(e)};Xe.isDate=function(e){return"[object Date]"===toString.call(e)};Xe.isNumber=function(e){return"[object Number]"===toString.call(e)};Xe.each=function(e,t,n){if(null!=e){var i={},r=Array.prototype.forEach;if(r&&e.forEach===r)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,s=e.length;o<s;o++)if(o in e&&t.call(n,e[o],o,e)===i)return}else for(var a in e)if(hasOwnProperty.call(e,a)&&t.call(n,e[a],a,e)===i)return}};Xe.buildQuery=function(e,t){var n,i,r=[];void 0===t&&(t="&");Xe.each(e,function(e,t){n=encodeURIComponent(e.toString());i=encodeURIComponent(t);r[r.length]=i+"="+n});return r.join(t)};Xe.JSONDecode=function(e){if(e){try{return JSON.parse(e)}catch(e){console.error("JSONDecode error",e)}return null}};Xe.JSONEncode=function(e){try{return JSON.stringify(e)}catch(e){console.error("JSONEncode error",e)}};var Qe=Object.create(null);function Ze(i){p().v("开始构建 fetch body");h.getSystemInfo(function(n){h.getNetworkInfo(function(e){var t=(t=(e=e||{}).networkType)===Je.MOBILE_NETWORK_NONE?"unknown":t.toUpperCase();Qe.access=t;!function(e,t){var n=e.brand||"";Qe.deviceType="Phone";Qe.sdkVersion=Je.SDK_VERSION;Qe.appkey=f().appKey();Qe.sdkType=h.getSdkType();Qe.umid=I().getId();if(e){Qe.language=e.language||"";Qe.os=e.OS;Qe.osVersion=e.OSVersion;Qe.deviceName=e.deviceName;Qe.platformVersion=e.platformVersion;Qe.platformSdkVersion=e.platformSDKVersion;Qe.deviceBrand=n;var i=e.resolution.split("*");if(Xe.isArray(i)){Qe.resolutionHeight=Number(i[0]);Qe.resolutionWidth=Number(i[1])}}!function(e){if(e){Qe.installTime=e.install_datetime&&Date.parse(e.install_datetime);Qe.scene=e.install_scene;Qe.channel=e.install_channel;Qe.campaign=e.install_campaign}}(Ne.getImpObj());t&&t(Qe)}(n,i)})})}var $e=Object.create(null),et=null,tt=!1,nt={minFetchIntervalSeconds:43200};function it(e){e&&Xe.each(e,function(e){$e[e.k]=e})}function rt(){var t=this;this.STORAGE_NAME=null;a.once(a.messageType.CONFIG_LOADED,function(e){p().v("云配初始化开始...");t.init(e)})}rt.prototype={setDefaultValues:function(e){tt&&Xe.isObject(e)&&Xe.each(e,function(e,t){$e[t]&&$e[t].v||($e[t]={v:e})})},getValue:function(t){p().v("从配置项中读取 value, 当前配置为: ",$e);p().v("待读取的 key : ",t);try{if(!tt)return;var e=$e[t]||{};p().v("读取相应配置ing..., 结果为: ",e);if(Xe.isNumber(e.e)&&Xe.isNumber(e.g)){p().v("读取到相应配置, 开始数据上报...");!function(e){var t={appkey:f().appKey(),sdkType:h.getSdkType(),expId:e&&e.e,groupId:e&&e.g,clientTs:Date.now(),key:e&&e.k,value:e&&e.v,umid:I().getId()};try{h.request({url:Je.ABLOG_URL,method:"POST",data:[t],success:function(e){e&&200===e.statusCode?p().v("上传数据成功",t):p().w("ablog 请求成功, 返回结果异常 ",e)},fail:function(e){p().w("ablog 请求数据错误 ",t,e)}})}catch(e){p().w("urequest 调用错误",e)}}(e)}return e.v}catch(e){p().w("getValue error, key: ",t)}},active:function(e){try{if(!tt)return;var t,n;e&&e.params&&(t=e.params);e&&e.callback&&(n=e.callback);p().v("激活配置项: ",t);if(t){p().v("本地已缓存的配置项: ",$e);it(t);p().v("合并后的配置项: ",$e);n&&n($e);p().v("active 结束")}else{p().v("配置项为空!! 读取本地配置...");h.getStorage(this.STORAGE_NAME,function(e){if(e){it((e=Xe.JSONDecode(e)||{}).params);p().v("当前本地配置项为: ",$e);n&&n($e);p().v("active 结束")}else p().v("当前本地配置项为空, 退出激活")})}}catch(e){p().w("SDK active 错误",e)}},init:function(e){if(e.appKey){et=e.appKey;this.STORAGE_NAME="um_remote_config_{{"+et+"}}"}if(et)if(tt)p().w("SDK 已经初始化, 请避免重复初始化");else{tt=!0;this.setOptions(e);this.active()}else p().err("请检查您的小程序 appKey, appKey 不能为空")},setOptions:function(e){if(Xe.isObject(e)){var t=e.minFetchIntervalSeconds;Xe.isNumber(t)&&(nt.minFetchIntervalSeconds=Math.max(t,5))}},fetch:function(e){if(tt&&this.STORAGE_NAME){var i,r;e&&e.active&&(i=e.active);e&&e.callback&&(r=e.callback);var o=this;h.getStorage(this.STORAGE_NAME,function(e){p().v("开始读缓存 data is ",e);if((e=Xe.JSONDecode(e)||{}).params&&e.ts&&Date.now()-e.ts<1e3*nt.minFetchIntervalSeconds){p().v("缓存数据存在, 并且本次触发时间距离上次fetch触发时间未超过 fetch 时间间隔, 无需 fetch");r&&r(e.params)}else Ze(function(t){p().v("缓存数据不存在, 构建 fetch body :",t);try{h.request({url:Je.FETCH_URL,method:"POST",data:t,success:function(e){if(e&&200===e.statusCode&&e.data&&e.data.cc){p().v("fetch 请求成功, 响应数据: ",e.data);var t=Object.create(null);Xe.each(e.data.cc,function(e){t[e.k]=e});var n={ts:Date.now(),params:t};p().v("开始缓存 fetch 请求的云配置结果...");h.setStorage(o.STORAGE_NAME,Xe.JSONEncode(n),function(e){p().v("缓存云配置成功, 缓存数据为: ",n);p().v("缓存云配置成功, 成功消息为: ",e);p().v("云配拉取数据是否自动激活: ",i);if(e&&i){p().v("激活云配置...");o.active({params:t,callback:r})}})}else{p().w("fetch 请求成功,返回结果异常 ",e.data);r&&r()}},fail:function(e){p().w("fetch请求数据错误 ",t,e);r&&r()}})}catch(e){p().w("urequest调用错误",e)}})})}}};var ot={install:function(e,t){e.rc||(e.rc=new rt);e.messager.once(e.messager.messageType.CONFIG_LOADED,function(){e._log.v("plugin rc installed")});return e.rc}},st="",at={};function ut(e){e&&(st=e)}function ct(){return function(e,t){if(!e)return"";var n=[];for(var i in t)"_um_ssrc"!==i&&"_um_sts"!==i&&n.push(i+"="+t[i]);var r=n.join("&");return r?e+"?"+r:e}(st,at[st])}function ft(e,i){if(e.onShareAppMessage){var r=e.onShareAppMessage;e.onShareAppMessage=function(e){var t=r.call(this,e)||{},n=ct();!t.path&&n&&(t.path=n);return i.trackShare.call(this,t)}}}function pt(e,t,n){var i=e[t];e[t]=function(e){n.call(this,e);i&&i.call(this,e)}}function ht(e){try{We.resume(e,!0)}catch(e){p().v("onAppShow: ",e)}}function dt(){try{We.pause()}catch(e){p().v("onAppHide: ",e)}}function lt(){try{ut(this.route);We.trackPageStart(this.route)}catch(e){p().v("onPageShow: ",e)}}function gt(e){try{ut(this.route);e&&(t=this.route,n=e,t&&(at[t]=n));p().v("Page onLoad: ",this.route,e)}catch(e){p().v("onPageLoad: ",e)}var t,n}function vt(){try{We.trackPageEnd(this.route)}catch(e){p().v("onPageHide: ",e)}}try{var _t=App;App=function(e){pt(e,"onLaunch",function(){!function(e){try{We.init(e)}catch(e){p().v("onAppLaunch: ",e)}}(e.umengConfig)});pt(e,"onShow",ht);pt(e,"onHide",dt);_t(e)}}catch(e){p().w("App重写异常")}try{var yt=Page;Page=function(e){pt(e,"onShow",lt);pt(e,"onHide",vt);pt(e,"onUnload",vt);pt(e,"onLoad",gt);ft(e,We);yt(e)}}catch(e){p().w("Page重写异常")}try{var mt=Component;Component=function(t){try{t.methods=t.methods||{};var e=t.methods;pt(e,"onShow",lt);pt(e,"onHide",vt);pt(e,"onUnload",vt);pt(e,"onLoad",gt);ft(e,We);mt(t)}catch(e){mt(t)}}}catch(e){p().w("Component重写异常")}var St=We.init;We.init=function(e){if(e&&e.useOpenid){p().tip_w(p().repeat("!"));p().tip_w("openid已开启，请确保使用setOpenid设置openid或通过设置autoGetOpenid为true，并在友盟后台设置secret由友盟帮您获取");p().tip_w(p().repeat("!"))}St.call(We,e)};We.use(ot);ks.uma=We;module.exports=We;
